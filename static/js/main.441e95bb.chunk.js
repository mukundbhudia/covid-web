(this["webpackJsonpcovid-web"]=this["webpackJsonpcovid-web"]||[]).push([[0],{111:function(e,a,t){},112:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(35),o=t.n(c),l=t(16),i=t(115),s=(t(81),t(82),t(116)),d=(t(83),function(e){var a=e.errorData;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h3",null,"Error"),r.a.createElement("p",null,"There's been an error with COVID-19 Dashboard :(. ",r.a.createElement("br",null)," Below are the details:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"card bg-light error-border border-danger mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("pre",{className:"error"},JSON.stringify(a,null,2)))))),r.a.createElement("p",null,"Click"," ",r.a.createElement("span",{className:"btn btn-link span-link",onClick:function(){return window.location.reload()}},"here")," ","to re-load the page and try again.")))}),m=t(13),u=t(11),p=function(){var e={width:"40px",height:"40px"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,"Loading data for dashboard ..."),r.a.createElement("div",{className:"spinner-grow",style:e,role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading data for dashboard ...")))))},y=t(10),h=t(18),v=t.n(h),b=function(e){return"number"===typeof e},f=function(e,a,t){var n=e/a*100;return t>=0&&t<=20?n.toFixed(t):n.toFixed(0)},g=function(e,a){for(var t,n=e.length,r=a-1,c=Array(n).fill(NaN),o=0,l=0,i=0;l<n&&i<r;l++)t=e[l],b(t)&&(o+=t,i++);for(;l<n;l++)t=e[l],b(t)&&(o+=t),b(e[l-a])&&(o-=e[l-a]),c[l]=o/a;return c.slice(a-1)},E={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",darkPurple:"rgb(102, 68, 170)",grey:"rgb(201, 203, 207)",darkGrey:"rgb(160, 161, 164)",progressBadGrey:"#b0b0b0",darkGreen:"#26a69a",lightGreen:"#80cbc4",darkIndigo:"#5c6bc0",lightIndigo:"#9fa8da"},C={purple:"#4527a0",red:"#d32f2f",green:"#00c853",blue:"#0277bd",yellow:"#fbc02d",orange:"#ff7043"},N=function(e){var a=e.chartTitle,t=e.casesToHide,c=e.data,o=r.a.createRef(),l=Object(n.useState)("linear"),i=Object(y.a)(l,2),s=i[0],d=i[1],m=Object(n.useState)("line"),u=Object(y.a)(m,2),p=u[0],h=u[1],b=Object(n.useState)(7),f=Object(y.a)(b,2),C=f[0],N=f[1],T=[],k=[],w=[],x=[],D=[],S=c.findIndex((function(e){return e.confirmed>0})),L=c.slice(S),O=c[S-1];O&&L.unshift(O),L.forEach((function(e){var a,t,n=new Date(e.day);a=n,t=e,T.push(a.toLocaleDateString()),k.push({x:a,y:t.confirmed}),x.push({x:a,y:t.deaths}),w.push({x:a,y:t.confirmedCasesToday}),D.push({x:a,y:t.deathsToday})}));var j=w.map((function(e){return e.y})),V=D.map((function(e){return e.y})),F=g(j,C),B=g(V,C),P=T.map((function(e,a){return{x:new Date(e),y:F[a]}})),A=T.map((function(e,a){return{x:new Date(e),y:B[a]}})),K={type:p,data:{labels:T,datasets:[{type:p,label:"Cumulative confirmed cases",fill:!1,backgroundColor:E.red,borderColor:E.red,order:0,data:k,hidden:t.confirmed},{type:p,label:"Cumulative deaths",fill:!1,backgroundColor:E.grey,borderColor:E.grey,order:1,data:x,hidden:t.deaths},{type:"bar",label:"Daily confirmed cases",fill:!1,backgroundColor:E.purple,borderColor:E.purple,order:3,data:w,hidden:t.confirmedToday},{type:"line",label:"Daily confirmed ".concat(C," day moving average"),fill:!1,backgroundColor:E.darkPurple,borderColor:E.darkPurple,order:2,data:P,hidden:t.confirmedTodayMovingAverage},{type:"bar",label:"Daily deaths",fill:!1,backgroundColor:E.yellow,borderColor:E.yellow,order:5,data:D,hidden:t.deathsToday},{type:"line",label:"Daily deaths ".concat(C," day moving average"),fill:!1,backgroundColor:E.darkGrey,borderColor:E.darkGrey,order:4,data:A,hidden:t.deathsTodayMovingAverage}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top"},animation:{duration:0},title:{display:!0,text:a},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"";return t&&(t+=": "),t+=e.yLabel.toFixed(0).toLocaleString(),t}}},elements:{point:{radius:0}},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,type:s,scaleLabel:{display:!0,labelString:"Number of cases"},ticks:{beginAtZero:!0,callback:function(e){return e.toLocaleString()}}}]}}};return Object(n.useEffect)((function(){var e=o.current.getContext("2d"),a=new v.a(e,K);return function(){return a.destroy()}}),[o,K]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chart timeSeries"},r.a.createElement("canvas",{className:"canvas",ref:o})),r.a.createElement("div",{className:"btn-toolbar justify-content-end",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-tip":"Moving average period in days (".concat(C,")")},r.a.createElement("input",{type:"range",className:"movingAverage custom-range",min:"1",max:30,id:"movingAverageSlider",value:C,onChange:function(e){N(e.target.value)}})),r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("linear"===s?"active":"")},r.a.createElement("input",{type:"radio",name:"data-type",onClick:function(){d("linear")}})," ","Linear"),r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("logarithmic"===s?"active":"")},r.a.createElement("input",{type:"radio",name:"data-type",onClick:function(){d("logarithmic")}})," ","Logarithmic")),r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("line"===p?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){h("line")}})," ","Line"),r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("bar"===p?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){h("bar")}})," ","Bar"))))},T=function(e){var a=e.cases,t=e.currentCases,n=e.title,c="Global time series cases by day",o="Global time series daily cases by day";return n&&(c="Time series cases by day for ".concat(n),o="Time series daily cases by day for ".concat(n)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(N,{chartTitle:c,casesToHide:{confirmed:!1,deaths:!1,confirmedToday:!1,confirmedTodayMovingAverage:!0,deathsToday:!1,deathsTodayMovingAverage:!0},data:a,currentCases:t}))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(N,{chartTitle:o,casesToHide:{confirmed:!0,deaths:!0,confirmedToday:!1,confirmedTodayMovingAverage:!1,deathsToday:!1,deathsTodayMovingAverage:!1},data:a,currentCases:t}))))},k=t(29),w=function(e){var a=e.lastUpdated,t=parseInt(a),n=k.a(new Date(t));return a<=0&&(n="unknown"),r.a.createElement("div",{className:"col-sm float-right"},r.a.createElement("p",{className:"lastUpdatedTimeStamp float-right"},"Data last updated: ",r.a.createElement("span",{id:"lastUpdated"},n)))},x=function(e){var a=e.caseCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert alert-danger",role:"alert"},r.a.createElement("h5",null,"Confirmed"),r.a.createElement("div",{id:"confirmedCounter",className:"total-cases text-danger"},a>=0?a.toLocaleString():"N/A")))},D=function(e){var a=e.caseCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert alert-primary",role:"alert"},r.a.createElement("h5",null,"Active"),r.a.createElement("div",{id:"activeCounter",className:"total-cases text-primary"},a>=0?a.toLocaleString():"N/A")))},S=function(e){var a=e.caseCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert alert-success",role:"alert"},r.a.createElement("h5",null,"Recovered"),r.a.createElement("div",{id:"recoveredCounter",className:"total-cases text-success"},a>=0?a.toLocaleString():"N/A")))},L=function(e){var a=e.caseCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert alert-dark",role:"alert"},r.a.createElement("h5",null,"Deaths"),r.a.createElement("div",{id:"deathsCounter",className:"total-cases text-dark"},a>=0?a.toLocaleString():"N/A")))},O=function(e){var a=e.caseCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert alert-purple",role:"alert"},r.a.createElement("h5",null,"Cases\xa0today"),r.a.createElement("div",{id:"confirmedTodayCounter",className:"total-cases text-purple"},a>=0?a.toLocaleString():"N/A")))},j=function(e){var a=e.caseCount;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert alert-warning",role:"alert"},r.a.createElement("h5",null,"Deaths\xa0today"),r.a.createElement("div",{id:"deathsTodayCounter",className:"total-cases text-yellow"},a>=0?a.toLocaleString():"N/A")))},V=function(e){var a=e.data,t=e.message,n=new Date(a.day),c=new Date,o=k.a(a.day),l=Math.trunc((c.getTime()-n.getTime())/864e5),i=r.a.createElement(r.a.Fragment,null,n.toLocaleDateString(),"\xa0",r.a.createElement("span",{className:"notable-tooltip","data-tip":"".concat(l," days ago")},"(",o,")"));return"Most cases"!==t&&"Most deaths"!==t||(i=r.a.createElement(r.a.Fragment,null,a.count?a.count.toLocaleString():"N/A","\xa0",r.a.createElement("span",{className:"notable-tooltip","data-tip":n.toLocaleDateString()},"(",o,")"))),r.a.createElement("div",{className:"alert alert-notable",role:"alert"},r.a.createElement("div",{className:"notable-dates text-notable"},r.a.createElement("strong",null,t),": ",a.day?i:"N/A"))},F=function(e){var a=e.currentCases,t={firstCase:{count:null,day:a.dateOfFirstCase},firstDeath:{count:null,day:a.dateOfFirstDeath},highestCases:{count:a.highestDailyConfirmed.count,day:a.highestDailyConfirmed.date},highestDeaths:{count:a.highestDailyDeaths.count,day:a.highestDailyDeaths.date}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(V,{data:t.firstCase,message:"First case"})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(V,{data:t.firstDeath,message:"First death"})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(V,{data:t.highestCases,message:"Most cases"})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(V,{data:t.highestDeaths,message:"Most deaths"}))))},B=function(e){var a=function(e){return e.map((function(a,t){var n=e.reduce((function(e,a){return e+a.data}),0);return 0===n?0:(t+1===e.length?a.percentage=Math.ceil(a.data/n*100)-1:a.percentage=Math.ceil(a.data/n*100),a)}))}(e.dataSet);return r.a.createElement("div",{className:"progress"},a.map((function(e,a){return e.percentage>0?r.a.createElement("div",{key:a,className:"progress-bar",role:"progressbar",style:{width:"".concat(e.percentage,"%"),backgroundColor:"".concat(E[e.color])},"aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100","data-toggle":"tooltip","data-placement":"top",title:e.label},e.percentage,"%"):null})))},P=function(e){var a=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card bg-light mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},"Confirmed/Active"),r.a.createElement(B,{dataSet:a}))))},A=function(e){var a=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card bg-light mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},"Recoveries/Deaths"),r.a.createElement(B,{dataSet:a}))))},K=function(e){var a=e.title,t=e.total,n=e.percentage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert vaccine-badge",role:"alert"},r.a.createElement("h5",null,a),r.a.createElement("div",{id:"peopleFullyVaccinatedCounter",className:"total-fully-vaccinated text-vaccine"},t&&t>=0?t.toLocaleString():"0","\xa0",r.a.createElement("span",{className:"notable-tooltip","data-tip":"As a percentage of the population"},"(",t&&t>=0?n:"0.0","%)"))))},M=function(e){var a=e.title,t=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert test-badge",role:"alert"},r.a.createElement("h5",null,a),r.a.createElement("div",{id:"totalTestsCounter",className:"total-tests text-test"},t&&t>=0?t.toLocaleString():"0")))},U=function(e){var a=e.title,t=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"alert test-badge",role:"alert"},r.a.createElement("h5",null,a),r.a.createElement("div",{id:"totalTestsPerThousandCounter",className:"total-tests-per-thousand text-test"},t&&t>=0?t.toLocaleString():"0")))},H=function(e){var a=e.cases,t=e.currentCases,n=e.confirmedVsActiveProgressBar,c=e.recoveredVsDeathsProgressBar,o=t.peopleFullyVaccinated&&t.totalVaccinations&&t.totalTests&&t.totalTestsPerThousand,l=!1;return o>=0&&null!==o&&(l=!0),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(x,{caseCount:t.confirmed})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(D,{caseCount:t.active})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(S,{caseCount:t.recovered})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(L,{caseCount:t.deaths})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(O,{caseCount:t.confirmedCasesToday})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(j,{caseCount:t.deathsToday}))),l&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(K,{title:"Total vaccinations",total:t.totalVaccinations,percentage:t.totalVaccinationsPerHundred})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(K,{title:"Total fully vaccinated",total:t.peopleFullyVaccinated,percentage:t.peopleFullyVaccinatedPerHundred})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(M,{title:"Total tests",data:t.totalTests})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(U,{title:"Tests per thousand",data:t.totalTestsPerThousand}))),r.a.createElement(F,{cases:a,currentCases:t}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(P,{data:n})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(A,{data:c}))))},I=t(60),R=t(61),X=t(75),G=t(74),W=t(62),q=t.n(W),$=t(44),_=t.n($),Z=(t(87),function(e){Object(X.a)(t,e);var a=Object(G.a)(t);function t(){return Object(I.a)(this,t),a.apply(this,arguments)}return Object(R.a)(t,[{key:"isValidCase",value:function(e){return e>=0}},{key:"processMapData",value:function(e,a,t,n,r){var c=this,o=[];e.forEach((function(e,a){if(e.countryCode){var t=parseInt(e[n]);if(!r)return o.push([e.countryCode,c.isValidCase(t)?t:0,e.idKey]);if(r)return o.push([e.countryCode,t,parseInt(e.confirmedCasesToday),parseInt(e.active)||"N/A",parseInt(e.recovered)||"N/A",parseInt(e.deaths),parseInt(e.deathsToday),e.idKey])}}));var l={},i=o.map((function(e){return e[1]})),s=Math.min.apply(null,i),d=Math.max.apply(null,i),m=_.a.scale.linear().domain([s,d]).range([a,t]);return o.forEach((function(e){var a=e[0],t=e[1],n=e[2];if(r){var c=e[2],o=e[3],i=e[4],s=e[5],d=e[6];n=e[7],l[a]={caseCount:t,confirmedCasesToday:c,active:o,recovered:i,deaths:s,deathsToday:d,idKey:n,fillColor:m(t)}}else l[a]={caseCount:t,idKey:n,fillColor:m(t)}})),l}},{key:"generateNewMap",value:function(e,a,t){return new q.a({element:document.getElementById("choroplethMap-".concat(a)),projection:"mercator",fills:{defaultFill:"#F5F5F5"},data:e,geographyConfig:{borderColor:"#DEDEDE",highlightBorderWidth:2,highlightFillColor:function(e){return e.fillColor||"#F5F5F5"},highlightBorderColor:"#B7B7B7",popupTemplate:function(e,n){var r='\n          <div class="hoverinfo">\n            <strong>'.concat(e.properties.name,"</strong>\n            <br>").concat(a,": <span>N/A</span>\n          </div>");return n&&!t?r='\n            <div class="hoverinfo">\n              <strong>'.concat(e.properties.name,"</strong>\n              <br>").concat(a,": <strong>").concat(n.caseCount.toLocaleString(),"</strong>\n            </div>"):n&&t&&(r='\n            <div class="hoverinfo">\n              <strong>'.concat(e.properties.name,"</strong>\n              <br>").concat(a,": <strong>").concat(n.caseCount.toLocaleString(),"</strong>\n              <br>Confirmed today: <span>").concat(n.confirmedCasesToday.toLocaleString(),"</span>\n              <br>Active: <span>").concat(n.active.toLocaleString(),"</span>\n              <br>Recovered: <span>").concat(n.recovered.toLocaleString(),"</span>\n              <br>Deaths: <span>").concat(n.deaths.toLocaleString(),"</span>\n              <br>Deaths today: <span>").concat(n.deathsToday.toLocaleString(),"</span>\n            </div>")),r}},done:function(a){a.svg.selectAll(".datamaps-subunit").on("click",(function(a){e&&a.id&&e[a.id]&&e[a.id].idKey&&(window.location.href="".concat(".","/").concat(e[a.id].idKey))}))}})}},{key:"componentDidUpdate",value:function(e){if(this.props.date!==e.date){var a=this.props.data,t=this.props.lightColour,n=this.props.darkColour,r=this.props.caseType,c=this.props.showMoreThanOneDataItem||!1,o=this.processMapData(a,t,n,r,c);this.map.updateChoropleth(o)}}},{key:"componentDidMount",value:function(){var e=this.props.data,a=this.props.mapDataLabel,t=this.props.lightColour,n=this.props.darkColour,r=this.props.caseType,c=this.props.showMoreThanOneDataItem||!1,o=this.processMapData(e,t,n,r,c);this.map=this.generateNewMap(o,a,c)}},{key:"render",value:function(){var e=this.props.mapDataLabel;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"choroplethMap-".concat(e),className:"choroplethMap"}))}}]),t}(n.Component)),J=t(21);function z(){var e=Object(J.a)(["\n  query GlobalCases($day: String!) {\n    getGlobalCasesByDate(day: $day) {\n      countryCode\n      idKey\n      confirmed\n      active\n      recovered\n      deaths\n      confirmedCasesToday\n      deathsToday\n    }\n  }\n"]);return z=function(){return e},e}function Q(){var e=Object(J.a)(["\n  query ProvincesGivenCountry($countryName: String!) {\n    getProvincesGivenCountryName(country: $countryName) {\n      province\n      idKey\n      active\n      confirmed\n      deaths\n      confirmedCasesToday\n      deathsToday\n      recovered\n    }\n  }\n"]);return Q=function(){return e},e}function Y(){var e=Object(J.a)(["\n  query GetCases($idKey: String!) {\n    getCasesByIdKey(idKey: $idKey) {\n      country\n      province\n      confirmed\n      active\n      recovered\n      deaths\n      confirmedCasesToday\n      deathsToday\n      latitude\n      longitude\n      lastUpdate\n      dateOfFirstCase\n      dateOfFirstDeath\n      peopleFullyVaccinated\n      totalVaccinations\n      totalVaccinationsPerHundred\n      peopleFullyVaccinatedPerHundred\n      totalTests\n      totalTestsPerThousand\n      highestDailyConfirmed {\n        count\n        date\n      }\n      highestDailyDeaths {\n        count\n        date\n      }\n      casesByDate {\n        confirmed\n        deaths\n        confirmedCasesToday\n        deathsToday\n        day\n      }\n      provincesList {\n        idKey\n        province\n      }\n      hasProvince\n    }\n  }\n"]);return Y=function(){return e},e}function ee(){var e=Object(J.a)(["\n  query {\n    totalCases {\n      population\n      totalVaccinations\n      peopleVaccinated\n      peopleFullyVaccinated\n      totalVaccinationsPerHundred\n      peopleVaccinatedPerHundred\n      peopleFullyVaccinatedPerHundred\n    }\n    casesByLocationWithNoProvince {\n      idKey\n      countryCode\n      country\n      continent\n      population\n      totalVaccinations\n      peopleVaccinated\n      peopleFullyVaccinated\n      totalVaccinationsPerHundred\n      peopleVaccinatedPerHundred\n      peopleFullyVaccinatedPerHundred\n    }\n  }\n"]);return ee=function(){return e},e}function ae(){var e=Object(J.a)(["\n  query {\n    casesByLocationWithNoProvince {\n      countryCode\n      idKey\n      confirmed\n      active\n      recovered\n      deaths\n      confirmedCasesToday\n      deathsToday\n    }\n  }\n"]);return ae=function(){return e},e}function te(){var e=Object(J.a)(["\n  query {\n    totalCases {\n      confirmedCasesToday\n      deathsToday\n    }\n    topXconfirmedTodayByCountry(limit: 10) {\n      country\n      confirmedCasesToday\n    }\n    topXdeathsTodayByCountry(limit: 10) {\n      country\n      deathsToday\n    }\n    casesByLocationWithNoProvince {\n      countryCode\n      idKey\n      confirmedCasesToday\n      deathsToday\n    }\n  }\n"]);return te=function(){return e},e}function ne(){var e=Object(J.a)(["\n  query TopCases($limit: Int!) {\n    topXconfirmedByCountry(limit: $limit) {\n      country\n      confirmed\n    }\n    topXactiveByCountry(limit: $limit) {\n      country\n      active\n    }\n    topXrecoveredByCountry(limit: $limit) {\n      country\n      recovered\n    }\n    topXdeathsByCountry(limit: $limit) {\n      country\n      deaths\n    }\n    topXconfirmedTodayByCountry(limit: $limit) {\n      country\n      confirmedCasesToday\n    }\n    topXdeathsTodayByCountry(limit: $limit) {\n      country\n      deathsToday\n    }\n  }\n"]);return ne=function(){return e},e}function re(){var e=Object(J.a)(["\n  query {\n    casesByLocationWithNoProvince {\n      idKey\n      country\n      confirmed\n      confirmedCasesToday\n      recovered\n      deaths\n      deathsToday\n      totalTests\n      totalTestsPerThousand\n      totalVaccinations\n      totalVaccinationsPerHundred\n      lastUpdate\n    }\n  }\n"]);return re=function(){return e},e}function ce(){var e=Object(J.a)(["\n  query {\n    casesByLocationWithNoProvince {\n      idKey\n      country\n    }\n  }\n"]);return ce=function(){return e},e}function oe(){var e=Object(J.a)(["\n  query GetCases($idKeys: [String]!) {\n    getManyCasesByIdKey(idKeys: $idKeys) {\n      idKey\n      country\n      province\n      confirmed\n      active\n      recovered\n      deaths\n      confirmedCasesToday\n      deathsToday\n      lastUpdate\n      casesByDate {\n        confirmed\n        deaths\n        confirmedCasesToday\n        deathsToday\n        day\n      }\n    }\n  }\n"]);return oe=function(){return e},e}function le(){var e=Object(J.a)(["\n  query {\n    totalCases {\n      confirmed\n      active\n      recovered\n      deaths\n      confirmedCasesToday\n      deathsToday\n      dateOfFirstCase\n      dateOfFirstDeath\n      peopleFullyVaccinated\n      totalVaccinations\n      totalVaccinationsPerHundred\n      peopleFullyVaccinatedPerHundred\n      totalTests\n      totalTestsPerThousand\n      highestDailyConfirmed {\n        count\n        date\n      }\n      highestDailyDeaths {\n        count\n        date\n      }\n    }\n    globalTimeSeries {\n      confirmed\n      deaths\n      confirmedCasesToday\n      deathsToday\n      day\n    }\n    getAllDaysWithCases\n  }\n"]);return le=function(){return e},e}function ie(){var e=Object(J.a)(["\n  query {\n    lastUpdated\n    casesByLocation {\n      idKey\n      country\n      province\n      confirmed\n      active\n      recovered\n      deaths\n    }\n  }\n"]);return ie=function(){return e},e}var se=Object(l.b)(ie()),de=Object(l.b)(le()),me=Object(l.b)(oe()),ue=Object(l.b)(ce()),pe=Object(l.b)(re()),ye=Object(l.b)(ne()),he=Object(l.b)(te()),ve=Object(l.b)(ae()),be=Object(l.b)(ee()),fe=Object(l.b)(Y()),ge=Object(l.b)(Q()),Ee=Object(l.b)(z()),Ce=function(e,a,t){return Math.min(Math.max(e,a),t)},Ne=[],Te=function(e){var a=e.dates,t=a.length,c=Object(n.useState)(t),o=Object(y.a)(c,2),l=o[0],i=o[1];Ne[l]=!0;var m,u=a[l-1],p=new Date(u),h=Object(s.a)(Ee,{variables:{day:u}}),v=h.loading,b=h.error,f=h.data,g=h.client,E=function(e){e=parseInt(e);for(var n=Ce(e-5,0,t),r=Ce(e+5,0,t),c=n;c<r;c++){if(!Ne[c]){var o=a[c];g.query({query:Ee,variables:{day:o}}),Ne[c]=!0}}};if(v)m=r.a.createElement(Z,{mapDataLabel:"Confirmed",showMoreThanOneDataItem:!0,caseType:"confirmed",data:[],date:"",lightColour:"#ffeaef",darkColour:"#ff6384"});else if(b)m=r.a.createElement(d,{errorData:b});else{var C=f.getGlobalCasesByDate;m=r.a.createElement(Z,{mapDataLabel:"Confirmed",showMoreThanOneDataItem:!0,caseType:"confirmed",data:C,date:u,lightColour:"#ffeaef",darkColour:"#ff6384"})}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card bg-light mb-3"},r.a.createElement("div",{className:"card-body pt-0"},m,r.a.createElement("div",{className:"heatmapSliderHeader d-flex justify-content-end"},r.a.createElement("span",null,"Confirmed cases on ",r.a.createElement("strong",null,p.toLocaleDateString()))),r.a.createElement("div",{className:"heatmapSliderControls",style:{display:"none"}},r.a.createElement("input",{type:"range",className:"custom-range",min:"1",max:t,id:"heatMapDateSlider",value:l,onMouseOver:function(){E(l)},onChange:function(e){var a;a=e.target.value,i(a),E(a)},disabled:!0})))))},ke=function(e){var a=e.title,t=e.lastUpdated,n=Object(s.a)(de),c=n.loading,o=n.error,l=n.data;if(c)return r.a.createElement(p,null);if(o)return r.a.createElement(d,{errorData:o});var i=l.totalCases,m=l.globalTimeSeries,u=l.getAllDaysWithCases,y=[{data:i.confirmed,label:"confirmed",color:"red"},{data:i.confirmed-i.active,label:"active",color:"blue"}],h=[{data:i.recovered,label:"recovered",color:"green"},{data:i.deaths,label:"deaths",color:"progressBadGrey"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page"},r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:t})),r.a.createElement(H,{cases:m,currentCases:i,confirmedVsActiveProgressBar:y,recoveredVsDeathsProgressBar:h}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(Te,{dates:u}))),r.a.createElement(T,{cases:m,currentCases:i}))},we=function(e){var a=Object(u.h)().id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:a,className:""},r.a.createElement("h3",null,"Page cannot not found")),r.a.createElement("br",null),r.a.createElement("div",{className:"container-xl"},r.a.createElement("p",null,'The page at "',r.a.createElement("strong",null,"/",a),'" cannot be found.')))},xe=function(e){var a=e.countryName,t=e.data,c=e.id,o=r.a.createRef(),l=[],i=[],s=[],d=[],m=[],u=[],p=[];t.forEach((function(e){"mainland"!==e.province&&e.province!==a&&(l.push({x:e.province,y:e.confirmed}),i.push({x:e.province,y:e.confirmedCasesToday}),s.push({x:e.province,y:e.active}),d.push({x:e.province,y:e.recovered}),m.push({x:e.province,y:e.deaths}),u.push({x:e.province,y:e.deathsToday}),p.push(e.province))}));var y={type:"bar",data:{labels:p,datasets:[{label:"Confirmed",backgroundColor:E.red,borderColor:E.red,data:l,fill:!1,hidden:!1},{label:"Active",backgroundColor:E.blue,borderColor:E.blue,data:s,fill:!1,hidden:!0},{label:"Recovered",backgroundColor:E.green,borderColor:E.green,data:d,fill:!1,hidden:!0},{label:"Deaths",backgroundColor:E.grey,borderColor:E.grey,data:m,fill:!1,hidden:!1},{label:"Confirmed today",backgroundColor:E.purple,borderColor:E.purple,data:i,fill:!1,hidden:!0},{label:"Deaths today",backgroundColor:E.yellow,borderColor:E.yellow,data:u,fill:!1,hidden:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{labels:!1},title:{display:!0,text:"Cases by each province/state of ".concat(a)},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"";return t&&(t+=": "),t+=e.yLabel.toLocaleString(),t}}},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Province/state"}}],yAxes:[{display:!0,type:"linear",scaleLabel:{display:!0,labelString:"Number of cases"},ticks:{beginAtZero:!0,callback:function(e){return e.toLocaleString()}}}]}}};return Object(n.useEffect)((function(){var e=o.current.getContext("2d"),a=new v.a(e,y);return function(){return a.destroy()}}),[o,y]),r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"chart provinces barGraph",id:c},r.a.createElement("canvas",{id:"canvas",ref:o})))},De=function(e){var a=e.countryName,t=e.idKey,n=Object(s.a)(ge,{variables:{countryName:a}}),c=n.loading,o=n.error,l=n.data;if(c)return r.a.createElement("p",null,"Loading provinces data ...");if(o)return r.a.createElement(d,{errorData:o});var i=[];l&&(i=[{idKey:a.replace(/,/g,"").replace(/\s+/g,"-").toLowerCase(),province:a}].concat(l.getProvincesGivenCountryName));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm provinceNav"},i.length>0&&r.a.createElement("ul",{className:"nav"},i.map((function(e,a){var n="nav-item provinceNavLink";return e.idKey===t&&(n="nav-item provinceNavLink active disabled"),r.a.createElement("li",{className:n,key:a},r.a.createElement(m.b,{className:"nav-link",to:e.idKey},"".concat(e.province)))}))))),r.a.createElement("div",{className:"row"},r.a.createElement(xe,{countryName:a,data:i,id:"provinceBarChart"})))},Se=function(){var e=Object(u.h)().id,a=Object(s.a)(fe,{variables:{idKey:e}}),t=a.loading,n=a.error,c=a.data;if(t)return r.a.createElement(p,null);if(n)return r.a.createElement(d,{errorData:n});var o=c&&c.getCasesByIdKey[0];if(!o)return r.a.createElement(we,null);var l,i,m=o.lastUpdate,y=e,h=[{data:o.confirmed,label:"confirmed",color:"red"},{data:o.confirmed-o.active,label:"active",color:"blue"}],v=[{data:o.recovered,label:"recovered",color:"green"},{data:o.deaths,label:"deaths",color:"progressBadGrey"}],b={confirmed:o.confirmed,active:o.active,recovered:o.recovered,deaths:o.deaths,confirmedCasesToday:o.confirmedCasesToday,deathsToday:o.deathsToday,dateOfFirstCase:o.dateOfFirstCase,dateOfFirstDeath:o.dateOfFirstDeath,highestDailyConfirmed:o.highestDailyConfirmed,highestDailyDeaths:o.highestDailyDeaths,peopleFullyVaccinated:o.peopleFullyVaccinated,totalVaccinations:o.totalVaccinations,totalVaccinationsPerHundred:o.totalVaccinationsPerHundred,peopleFullyVaccinatedPerHundred:o.peopleFullyVaccinatedPerHundred,totalTests:o.totalTests,totalTestsPerThousand:o.totalTestsPerThousand},f=(l=o.country,(i=o.province)?"".concat(l," - ").concat(i):"".concat(l));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:y,className:""},r.a.createElement("h3",null,f)),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:m})),r.a.createElement(H,{cases:o.casesByDate,currentCases:b,confirmedVsActiveProgressBar:h,recoveredVsDeathsProgressBar:v}),(o.province||o.hasProvince)&&r.a.createElement(De,{countryName:o.country,idKey:y}),r.a.createElement(T,{cases:o.casesByDate,currentCases:b,title:f}))},Le=function(e){var a=e.data,t=e.id,c=e.chartTitle,o=e.chartLabel,l=e.chartLabelKey,i=e.labelColor,s=r.a.createRef(),d=a.map((function(e){return{x:e.country,y:e[l]}})),m=a.map((function(e){return e.country})),u=E[i],p={type:"bar",data:{labels:m,datasets:[{label:o,backgroundColor:u,borderColor:u,data:d,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{labels:!1},title:{display:!0,text:c},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"";return t&&(t+=": "),t+=e.yLabel.toLocaleString(),t}}},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Country"}}],yAxes:[{display:!0,type:"linear",scaleLabel:{display:!0,labelString:"Number of cases"},ticks:{beginAtZero:!0,callback:function(e){return e.toLocaleString()}}}]}}};return Object(n.useEffect)((function(){var e=s.current.getContext("2d"),a=new v.a(e,p);return function(){return a.destroy()}}),[s,p]),r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"chart barGraph topx",id:t},r.a.createElement("canvas",{id:"canvas",ref:s})))},Oe=function(e,a){return e.filter((function(e){return e[a]>0}))},je=function(e){var a=e.data,t=e.includeToday;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement(Le,{data:Oe(a.topXconfirmedByCountry.data,"confirmed"),id:"top5confirmed",chartTitle:a.topXconfirmedByCountry.label,chartLabel:"Confirmed",chartLabelKey:"confirmed",labelColor:"red"}),r.a.createElement(Le,{data:Oe(a.topXactiveByCountry.data,"active"),id:"top5active",chartTitle:a.topXactiveByCountry.label,chartLabel:"Active",chartLabelKey:"active",labelColor:"blue"})),r.a.createElement("div",{className:"row"},r.a.createElement(Le,{data:Oe(a.topXrecoveredByCountry.data,"recovered"),id:"top5recovered",chartTitle:a.topXrecoveredByCountry.label,chartLabel:"Recovered",chartLabelKey:"recovered",labelColor:"green"}),r.a.createElement(Le,{data:Oe(a.topXdeathsByCountry.data,"deaths"),id:"top5deaths",chartTitle:a.topXdeathsByCountry.label,chartLabel:"Deaths",chartLabelKey:"deaths",labelColor:"grey"})),t&&r.a.createElement("div",{className:"row"},r.a.createElement(Le,{data:Oe(a.topXconfirmedTodayByCountry.data,"confirmedCasesToday"),id:"top5recovered",chartTitle:a.topXconfirmedTodayByCountry.label,chartLabel:"Confirmed cases today",chartLabelKey:"confirmedCasesToday",labelColor:"purple"}),r.a.createElement(Le,{data:Oe(a.topXdeathsTodayByCountry.data,"deathsToday"),id:"top5deaths",chartTitle:a.topXdeathsTodayByCountry.label,chartLabel:"Deaths today",chartLabelKey:"deathsToday",labelColor:"yellow"})))},Ve=[5,10,15,20],Fe=Ve[1],Be=function(e,a){try{var t=parseInt(a);return e.includes(t)?t:e[1]}catch(n){return console.error(n),e[1]}},Pe=function(e,a){return new URLSearchParams(e.search).get(a)},Ae=function(e){var a=e.lastUpdated,t=Object(u.f)(),c=Object(u.g)(),o=Pe(c,"top");o&&(Fe=Be(Ve,o));var l=Object(n.useState)(Fe),i=Object(y.a)(l,2),m=i[0],h=i[1];Object(n.useEffect)((function(){return t.listen((function(e){var a=Pe(e,"top"),t=null;if(a)try{t=Be(Ve,a)}catch(f){console.error(f)}h(t||10)}))}),[t,m]);var v=Object(s.a)(ye,{variables:{limit:m}}),b=v.loading,f=v.error,g=v.data,E=v.client;if(b)return r.a.createElement(p,null);if(f)return r.a.createElement(d,{errorData:f});var C=function(e){m!==e&&(h(e),t.push("?".concat(function(e,a){var t=new URLSearchParams;return t.set(a,e.limit),t.toString()}({limit:e},"top"))))},N={topXconfirmedByCountry:{data:g.topXconfirmedByCountry,label:"Top ".concat(m," confirmed by country")},topXactiveByCountry:{data:g.topXactiveByCountry,label:"Top ".concat(m," active by country")},topXrecoveredByCountry:{data:g.topXrecoveredByCountry,label:"Top ".concat(m," recovered by country")},topXdeathsByCountry:{data:g.topXdeathsByCountry,label:"Top ".concat(m," deaths by country")},topXconfirmedTodayByCountry:{data:g.topXconfirmedTodayByCountry,label:"Top ".concat(m," confirmed cases today by country")},topXdeathsTodayByCountry:{data:g.topXdeathsTodayByCountry,label:"Top ".concat(m," deaths today by country")}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page",className:""},r.a.createElement("h3",null,"Top ",m," cases globally")),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:a})),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons",onMouseOver:function(){Ve.forEach((function(e){E.query({query:ye,variables:{limit:e}})}))}},Ve.map((function(e){return r.a.createElement("label",{key:e,className:"btn btn-sm btn-light ".concat(m===e?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){C(e)}})," Top ",e)})))))),r.a.createElement("div",{className:"top-tab-container"},r.a.createElement(je,{data:N,includeToday:!0})))},Ke=function(e,a){return e.filter((function(e){return e[a]>0}))},Me={confirmedCasesToday:{label:"Confirmed cases today",lightColour:"#efedf5",darkColour:"#756bb1",textClassName:"confirmedTodayText"},deathsToday:{label:"Confirmed deaths today",lightColour:"#fff7bc",darkColour:"#d95f0e",textClassName:"deathsTodayText"}},Ue="confirmedCasesToday",He=function(e,a){var t=Object.keys(e);return t.includes(a)?a:t[0]},Ie=function(e,a){return new URLSearchParams(e.search).get(a)},Re=function(e){var a=e.title,t=e.lastUpdated,c=Object(u.g)(),o=Object(u.f)(),l=Ie(c,"mapType");l&&(Ue=He(Me,l));var i=Object(n.useState)(Ue),m=Object(y.a)(i,2),h=m[0],v=m[1];Object(n.useEffect)((function(){return o.listen((function(e){var a=Ie(e,"mapType"),t=null;if(a)try{t=He(Me,a)}catch(g){console.error(g)}v(t||"confirmedCasesToday")}))}),[h,o]);var b=Object(s.a)(he),f=b.loading,g=b.error,E=b.data;if(f)return r.a.createElement(p,null);if(g)return r.a.createElement(d,{errorData:g});var C=function(e){h!==e&&(v(e),o.push("?".concat(function(e,a){var t=new URLSearchParams;return t.set(a,e.mapType),t.toString()}({mapType:e},"mapType"))))},N=E.totalCases,T=E.casesByLocationWithNoProvince;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page",className:""},r.a.createElement("h3",null,a," | ",(new Date).toLocaleDateString())),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:t})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(O,{caseCount:N.confirmedCasesToday})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(j,{caseCount:N.deathsToday}))),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons"},Object.keys(Me).map((function(e){var a=Me[e];return r.a.createElement("label",{key:a.label,className:"btn btn-sm btn-light ".concat(h===e?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){C(e)}}),a.label)})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(Z,{mapDataLabel:"Cases",caseType:h,date:h,data:T,lightColour:Me[h].lightColour,darkColour:Me[h].darkColour}))),r.a.createElement("div",{className:"row multiTopBar"},r.a.createElement(Le,{data:Ke(E.topXconfirmedTodayByCountry,"confirmedCasesToday"),id:"top10confirmedToday",chartTitle:"Top 10 confirmed cases today by country",chartLabel:"Confirmed cases today",chartLabelKey:"confirmedCasesToday",labelColor:"purple"}),r.a.createElement(Le,{data:Ke(E.topXdeathsTodayByCountry,"deathsToday"),id:"top10deathsToday",chartTitle:"Top 10 deaths today by country",chartLabel:"Deaths today",chartLabelKey:"deathsToday",labelColor:"yellow"})))},Xe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:"footer col-md-10 float-right mt-5 py-3"},r.a.createElement("div",{className:"container pull-left"},r.a.createElement("span",{className:"text-muted"},"Data sources:"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CSSEGISandData/COVID-19"},"JHU CSSE"),",\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6"},"John Hopkins University"),",\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/owid/covid-19-data/tree/master/public/data"},"OWID"),".\xa0")),r.a.createElement("div",{className:"container pull-right"},r.a.createElement("span",{className:"text-muted"},"Made by:"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/mukundbhudia"},"Mukund"),",\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/salomao-rodrigues"},"Salom\xe3o"),".\xa0"))))},Ge={confirmed:{label:"Confirmed",lightColour:"#fee0d2",darkColour:"#de2d26",textClassName:"confirmedText"},active:{label:"Active",lightColour:"#deebf7",darkColour:"#3182bd",textClassName:"activeText"},recovered:{label:"Recovered",lightColour:"#e5f5e0",darkColour:"#31a354",textClassName:"recoveredText"},deaths:{label:"Deaths",lightColour:"#f0f0f0",darkColour:"#636363",textClassName:"deathsText"},confirmedCasesToday:{label:"Confirmed today",lightColour:"#efedf5",darkColour:"#756bb1",textClassName:"confirmedTodayText"},deathsToday:{label:"Deaths today",lightColour:"#fff7bc",darkColour:"#d95f0e",textClassName:"deathsTodayText"}},We="confirmed",qe=function(e,a){var t=Object.keys(e);return t.includes(a)?a:t[0]},$e=function(e,a){return new URLSearchParams(e.search).get(a)},_e=function(e){var a=e.title,t=e.lastUpdated,c=Object(u.g)(),o=Object(u.f)(),l=$e(c,"mapType");l&&(We=qe(Ge,l));var i=Object(n.useState)(We),m=Object(y.a)(i,2),h=m[0],v=m[1];Object(n.useEffect)((function(){return o.listen((function(e){var a=$e(e,"mapType"),t=null;if(a)try{t=qe(Ge,a)}catch(g){console.error(g)}v(t||"confirmed")}))}),[h,o]);var b=Object(s.a)(ve),f=b.loading,g=b.error,E=b.data;if(f)return r.a.createElement(p,null);if(g)return r.a.createElement(d,{errorData:g});var C=function(e){h!==e&&(v(e),o.push("?".concat(function(e,a){var t=new URLSearchParams;return t.set(a,e.mapType),t.toString()}({mapType:e},"mapType"))))},N=E.casesByLocationWithNoProvince;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page",className:""},r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:t})),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons"},Object.keys(Ge).map((function(e){var a=Ge[e];return r.a.createElement("label",{key:a.label,className:"btn btn-sm btn-light ".concat(h===e?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){C(e)}}),a.label)})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(Z,{mapDataLabel:"Cases",caseType:h,date:h,data:N,lightColour:Ge[h].lightColour,darkColour:Ge[h].darkColour}))))},Ze={home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',chart:'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',report:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>'},Je=function(e){var a=e.path,t=e.label,n=e.icon,c=Object(u.i)({path:a,exact:!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{className:c&&c.path===a?"nav-link active":"nav-link",to:a},n&&r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-home",dangerouslySetInnerHTML:{__html:Ze[n]}}),t))},ze=t(49),Qe=(t(111),function(e){var a=e.country;return null!==e.province&&(a+=" - ".concat(e.province)),a}),Ye=function(e){var a=e.data,t={disabled:!1,dropup:!1,flip:!1,highlightOnlyResult:!0,minLength:2,open:void 0},c=Object(u.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.b,Object.assign({},t,{labelKey:Qe,renderMenuItemChildren:function(e,a){var t=a.text,c=Qe(e);return r.a.createElement(n.Fragment,null,r.a.createElement(ze.a,{search:t},c),"\xa0",r.a.createElement("span",{className:"inputSearchBadge badge searchBadge-danger"},e.confirmed.toLocaleString()),r.a.createElement("span",{className:"inputSearchBadge badge searchBadge-primary"},e.active.toLocaleString()),r.a.createElement("span",{className:"inputSearchBadge badge searchBadge-success"},e.recovered.toLocaleString()),r.a.createElement("span",{className:"inputSearchBadge badge searchBadge-secondary"},e.deaths.toLocaleString()))},onChange:function(e){e[0]&&c.push("/".concat(e[0].idKey))},options:a,className:"w-100",id:"searchBox",type:"text",placeholder:"Search for a country, state, province...","aria-label":"Search"})))},ea=function(e){var a=e.searchData,t=Object(n.useState)(!0),c=Object(y.a)(t,2),o=c[0],l=c[1],i=o?"collapse navbar-collapse":"collapse navbar-collapse show",s=o?"navbar-toggler collapsed":"navbar-toggler";return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-sm fixed-top navbar-dark bg-dark flex-md-nowrap p-0 shadow"},r.a.createElement("a",{className:"navbar-brand",href:"".concat(".","/")},"COVID-19 Dashboard"),r.a.createElement("button",{onClick:function(){l(!0!==o)},className:"".concat(s),type:"button","data-toggle":"collapse","data-target":"#navbarsExample04","aria-controls":"navbarsExample04","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"".concat(i),id:"navbarsExample04"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/",label:"Global"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/today",label:"Today"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/vaccinations",label:"Vaccinations"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/top-cases",label:"Top\xa0cases"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/compare",label:"Compare"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/heatmaps",label:"Heatmaps"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/table",label:"Data\xa0table"})))),r.a.createElement(Ye,{data:a})))},aa=function(e){var a=e.casesByLocation;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"col-md-2 d-none d-md-block sidebar"},r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/",label:"Global",icon:"home"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/today",label:"Today",icon:"chart"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/vaccinations",label:"Vaccinations",icon:"chart"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/top-cases",label:"Top\xa0cases",icon:"chart"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/compare",label:"Compare",icon:"chart"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/heatmaps",label:"Heatmaps",icon:"report"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(Je,{path:"/table",label:"Data\xa0table",icon:"report"}))),r.a.createElement("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},r.a.createElement("span",null,"Reports by country")),r.a.createElement("ul",{className:"nav flex-column mb-2"},a&&a.sort((function(e,a){var t=e.country.toUpperCase(),n=a.country.toUpperCase(),r=0;return t>n?r=1:t<n&&(r=-1),r})).map((function(e){var a="";return null===e.province&&(a=r.a.createElement("li",{key:e.idKey,className:"nav-item"},r.a.createElement(m.b,{className:"nav-link",to:e.idKey},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-text"},r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),r.a.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),r.a.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),r.a.createElement("polyline",{points:"10 9 9 9 8 9"})),e.country))),a}))))))},ta=t(40),na=t(73),ra=function(e){var a=new URLSearchParams;return a.set("sort",e.sortKey),a.set("order",e.order),a.set("rows",e.rows),a.toString()},ca=function(e,a){var t="";return a&&a.sortKey===e&&(t="selectedForSortColumn"),t},oa=function(e,a){return a&&a.sortKey===e?"sortableTableHeader sorted":"sortableTableHeader"},la=function(e){var a=e.sortConfig,t=e.tableData,c=e.columnSchema,o=e.initialRowsLimit,l=t.length;a.rows>l?a.rows=l:a.rows<=0&&(a.rows=o);var i=Object(u.f)(),s=Object(n.useState)(a.rows||o||l),d=Object(y.a)(s,2),p=d[0],h=d[1],v=function(e,a){var t=Object(ta.a)(e);return null!==a&&t.sort((function(e,t){return e[a.sortKey]<t[a.sortKey]?"asc"===a.order?-1:1:e[a.sortKey]>t[a.sortKey]?"asc"===a.order?1:-1:0})),t}(t,a),b=function(e){var t=p+10;(t>l||"all"===e)&&(t=l),h(t),a.rows=t,i.push("?".concat(ra(a)))};return p&&p>0&&p<=l&&(a.rows=p,v=v.slice(0,p)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-sm table-responsive"},r.a.createElement("table",{className:"table table-sm table-hover sortable-data-table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),c.map((function(e){return r.a.createElement("th",{key:"colKey-".concat(e.key),scope:"col",className:oa(e.key,a),onClick:function(){return function(e,a,t){var n="asc",r=t.rows||"all";t&&t.sortKey===e&&"asc"===t.order&&(n="desc"),a.push("?".concat(ra({sortKey:e,order:n,rows:r})))}(e.key,i,a)}},e.name," ",function(e,a){var t="";return a.sortKey===e&&(t="asc"===a.order?"(\u2191)":"(\u2193)"),t}(e.key,a))})))),r.a.createElement("tbody",null,v.map((function(e,t){return r.a.createElement("tr",{key:e.idKey},r.a.createElement("td",{key:"numCol-".concat(t)},t+1),c.map((function(t){var n="percentage"===t.type?"%":"",c=r.a.createElement(r.a.Fragment,null,e[t.key]?"".concat(e[t.key].toLocaleString()).concat(n):"0".concat(n));return"link"===t.type?c=r.a.createElement(m.b,{title:e[t.key],to:e.idKey},Object(na.shortenString)(e[t.key],18)):"date"===t.type&&(c=r.a.createElement(r.a.Fragment,null,k.a(new Date(parseInt(e[t.key]))).replace("minutes","mins"))),r.a.createElement("td",{key:"colsForRows-".concat(t.key),className:ca(t.key,a)},c)})))})))),r.a.createElement("p",null,"Showing ",p," of ",l," rows."),p>0&&p<l&&r.a.createElement("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn btn-sm btn-light mr-1",onClick:function(){b()}},"Show ",10," more rows..."),r.a.createElement("div",{className:"btn btn-sm btn-light mr-1",onClick:function(){b("all")}},"Show all rows"))))},ia={sortKey:"country",order:"asc"},sa=function(e){var a=e.title,t=e.lastUpdated,n=Object(u.g)(),c=new URLSearchParams(n.search),o=c.get("sort"),l=c.get("order");o&&l&&(ia={sortKey:o,order:l});var i=Object(s.a)(pe),m=i.loading,y=i.error,h=i.data;if(m)return r.a.createElement(p,null);if(y)return r.a.createElement(d,{errorData:y});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page",className:""},r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:t})),r.a.createElement("div",{className:"row"},r.a.createElement(la,{sortConfig:ia,tableData:h.casesByLocationWithNoProvince,columnSchema:[{key:"country",name:"Country",type:"link"},{key:"confirmed",name:"Confirmed cases",type:"number"},{key:"confirmedCasesToday",name:"Cases today",type:"number"},{key:"recovered",name:"Recovered",type:"number"},{key:"deaths",name:"Deaths",type:"number"},{key:"deathsToday",name:"Deaths today",type:"number"},{key:"totalTests",name:"Total tests",type:"number"},{key:"totalTestsPerThousand",name:"Tests per 1000",type:"number"},{key:"totalVaccinations",name:"Vaccinations",type:"number"},{key:"totalVaccinationsPerHundred",name:"% vaccinated",type:"percentage"},{key:"lastUpdate",name:"Last updated",type:"date"}]})))},da=Object.keys(C),ma=function(e){var a=e.chartTitle,t=e.casesToHide,c=e.data,o=(e.currentCases,r.a.createRef()),l=Object(n.useState)("linear"),i=Object(y.a)(l,2),s=i[0],d=i[1],m=Object(n.useState)("line"),u=Object(y.a)(m,2),p=u[0],h=u[1],b=Object(n.useState)(7),f=Object(y.a)(b,2),E=f[0],N=f[1],T=[],k=[];c.forEach((function(e,a){var t=[],n=[],r=[],c=[];e.casesByDate.forEach((function(a){var o,l,i=new Date(a.day);T.length<e.casesByDate.length&&T.push(i.toLocaleDateString()),o=i,l=a,t.push({x:o,y:l.confirmed}),r.push({x:o,y:l.deaths}),n.push({x:o,y:l.confirmedCasesToday}),c.push({x:o,y:l.deathsToday})}));var o=e.casesByDate.map((function(e){return e.confirmedCasesToday})),l=e.casesByDate.map((function(e){return e.deathsToday})),i=g(o,E),s=g(l,E),d=T.map((function(e,a){return{x:new Date(e),y:i[a]}})),m=T.map((function(e,a){return{x:new Date(e),y:s[a]}}));k.push({country:e.country,confirmed:t,confirmedToday:n,deaths:r,deathsToday:c,movingAverageConfirmedTodayChartData:d,movingAverageDeathsTodayChartData:m,dataSetColour:C[da[a]]})}));var w={type:p,data:{labels:T,datasets:function(e){var a=[];return e.forEach((function(e){a.push({type:p,label:"Cumulative confirmed cases ".concat(e.country),fill:!1,backgroundColor:e.dataSetColour,borderColor:e.dataSetColour,order:0,data:e.confirmed,hidden:t.confirmed},{type:p,label:"Cumulative deaths ".concat(e.country),fill:!1,backgroundColor:e.dataSetColour,borderColor:e.dataSetColour,order:1,data:e.deaths,hidden:t.deaths},{type:"line",label:"Daily confirmed ".concat(E," day moving average ").concat(e.country),fill:!1,backgroundColor:e.dataSetColour,borderColor:e.dataSetColour,order:2,data:e.movingAverageConfirmedTodayChartData.slice(3,-3),hidden:t.confirmedTodayMovingAverage},{type:"line",label:"Daily deaths ".concat(E," day moving average ").concat(e.country),fill:!1,backgroundColor:e.dataSetColour,borderColor:e.dataSetColour,order:4,data:e.movingAverageDeathsTodayChartData.slice(3,-3),hidden:t.deathsTodayMovingAverage})})),a}(k)},options:{legend:{display:!1,position:"bottom"},responsive:!0,maintainAspectRatio:!1,animation:{duration:0},title:{display:!0,text:a},tooltips:{mode:"nearest",intersect:!1,callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"";return t&&(t+=": "),t+=e.yLabel.toFixed(0).toLocaleString(),t}}},elements:{point:{radius:0}},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,type:s,scaleLabel:{display:!0,labelString:"Number of cases"},ticks:{beginAtZero:!0,callback:function(e){return e.toLocaleString()}}}]}}};return Object(n.useEffect)((function(){var e=o.current.getContext("2d"),a=new v.a(e,w);return function(){return a.destroy()}}),[o,w]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chart timeSeries"},r.a.createElement("canvas",{className:"canvas",ref:o})),r.a.createElement("div",{className:"btn-toolbar justify-content-end",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-tip":"Moving average period in days (".concat(E,")")},r.a.createElement("input",{type:"range",className:"movingAverage custom-range",min:"1",max:30,id:"movingAverageSlider",value:E,onChange:function(e){N(e.target.value)}})),r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("linear"===s?"active":"")},r.a.createElement("input",{type:"radio",name:"data-type",onClick:function(){d("linear")}})," ","Linear"),r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("logarithmic"===s?"active":"")},r.a.createElement("input",{type:"radio",name:"data-type",onClick:function(){d("logarithmic")}})," ","Logarithmic")),r.a.createElement("div",{className:"btn-group btn-group-toggle mr-1","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("line"===p?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){h("line")}})," ","Line"),r.a.createElement("label",{className:"btn btn-sm btn-light ".concat("bar"===p?"active":"")},r.a.createElement("input",{type:"radio",name:"chart-type",onClick:function(){h("bar")}})," ","Bar"))))},ua=function(e){e.lastUpdated;var a,t,n,c,o=e.countries,l=Object(s.a)(me,{variables:{idKeys:o}}),i=l.loading,m=l.error,u=l.data;if(i)t=a=r.a.createElement(ma,{chartTitle:"Time series daily cases by day",casesToHide:{},data:[],currentCases:[]}),n=a,c=a;else if(m)t=a=r.a.createElement(d,{errorData:m}),n=a,c=a;else{var p=u&&u.getManyCasesByIdKey,y=p.map((function(e){return e.country})).join(", "),h=p.map((function(e){return{idKey:e.idKey,country:e.country,confirmed:e.confirmed,active:e.active,recovered:e.recovered,deaths:e.deaths,confirmedCasesToday:e.confirmedCasesToday,deathsToday:e.deathsToday}}));a=r.a.createElement(ma,{chartTitle:"Time series cumulative confirmed cases by day for ".concat(y),casesToHide:{confirmed:!1,deaths:!0,confirmedToday:!0,confirmedTodayMovingAverage:!0,deathsToday:!0,deathsTodayMovingAverage:!0},data:p,currentCases:h}),t=r.a.createElement(ma,{chartTitle:"Time series cumulative deaths by day for ".concat(y),casesToHide:{confirmed:!0,deaths:!1,confirmedToday:!0,confirmedTodayMovingAverage:!0,deathsToday:!0,deathsTodayMovingAverage:!0},data:p,currentCases:h}),n=r.a.createElement(ma,{chartTitle:"Daily cumulative deaths by day for ".concat(y),casesToHide:{confirmed:!0,deaths:!0,confirmedToday:!0,confirmedTodayMovingAverage:!1,deathsToday:!0,deathsTodayMovingAverage:!0},data:p,currentCases:h}),c=r.a.createElement(ma,{chartTitle:"Daily cumulative deaths by day for ".concat(y),casesToHide:{confirmed:!0,deaths:!0,confirmedToday:!0,confirmedTodayMovingAverage:!0,deathsToday:!0,deathsTodayMovingAverage:!1},data:p,currentCases:h})}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h6",null,"Cumulative confirmed cases")),a)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h6",null,"Cumulative deaths")),t)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h6",null,"Daily confirmed moving average")),n)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h6",null,"Daily deaths moving average")),c)))},pa=function(e){return e.filter((function(e){return e.checked})).map((function(e){return e.idKey}))},ya=new Set,ha=0,va=function(e){var a=e.countries,t=Object(u.f)(),c=Object(u.g)(),o=new URLSearchParams(c.search).get("countries");if(o){if((ya=new Set(o.split(","))).size>6){var l=0;ya.forEach((function(e){l>=6&&ya.delete(e),l++}))}a.forEach((function(e){ya.has(e.idKey)?e.checked=!0:e.checked=!1}))}var i=Object(n.useState)(a),s=Object(y.a)(i,2),d=s[0],m=s[1];ha=pa(d).length;var p=function(e,a){var n=function(e,a,t){return!0===a?e.forEach((function(e,n){e.idKey===t&&(e.checked=a)})):e.forEach((function(e){e.idKey===t&&(e.checked=a)})),e}(Object(ta.a)(d),e,a);m(n),t.push("?".concat(function(e){var a=new URLSearchParams;return a.set("countries",e.countries.toString()),a.toString()}({countries:pa(d)})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("p",null,"Compare countries with one another.\xa0",r.a.createElement("span",{style:{fontWeight:ha<6?"unset":"bold"}},ha)," out of a maximum of ",r.a.createElement("strong",null,6)," chosen:"),r.a.createElement("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"","data-toggle":"buttons"},d.map((function(e,a){return r.a.createElement("div",{key:e.idKey,className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"inlineCheckbox".concat(a),value:"option".concat(a),onChange:function(a){p(a.target.checked,e.idKey)},defaultChecked:e.checked,disabled:!(e.checked||ha<6)}),r.a.createElement("label",{className:"form-check-label",htmlFor:"inlineCheckbox".concat(a)},e.country))})))))),r.a.createElement(ua,{countries:pa(d)}))},ba=[],fa=function(e){var a=e.lastUpdated,t=Object(s.a)(ue),n=t.loading,c=t.error,o=t.data;return n?r.a.createElement(p,null):c?r.a.createElement(d,{errorData:c}):(ba=o.casesByLocationWithNoProvince.filter((function(e,a){return"germany"===e.idKey||"mexico"===e.idKey||"peru"===e.idKey||"south-africa"===e.idKey?e.checked=!0:e.checked=!1,e})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page",className:""},r.a.createElement("h3",null,"Compare countries")),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:a})),r.a.createElement(va,{countries:ba})))},ga=function(e){var a=e.id,t=e.chartTitle,c=e.chartData,o=e.showsPercentage,l=void 0!==o&&o,i=e.animation,s=void 0===i||i,d=r.a.createRef(),m=l?"%":"";c.datasets=c.datasets.map((function(e){var a=e.mainColor;return e.backgroundColor=v.a.helpers.color(a).alpha(.2).rgbString(),e.borderColor=a,e.pointBackgroundColor=a,e}));var u={type:"radar",data:c,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:s?1e3:0},legend:{position:"top"},title:{display:!0,text:t},tooltips:{mode:"index",intersect:!0,callbacks:{title:function(e,a){return a.labels[e[0].index]},label:function(e,a){var t=a.datasets[e.datasetIndex].label||"";return t&&(t+=": "),t+="".concat(e.yLabel.toLocaleString()).concat(m),t},footer:function(e,a){if(e.length>1){var t=e.map((function(e){return e.yLabel})).reduce((function(e,a){return e+a}));return"Total: ".concat(t.toLocaleString()).concat(m)}}},footerFontStyle:"normal"},scale:{ticks:{beginAtZero:!0,callback:function(e){return"".concat(e.toLocaleString()).concat(m)}}}}};return Object(n.useEffect)((function(){var e=d.current.getContext("2d"),a=new v.a(e,u);return function(){return a.destroy()}}),[d,u]),r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"chart radarChart",id:a},r.a.createElement("canvas",{id:"canvas",ref:d})))},Ea=function(e){var a=e.id,t=e.chartTitle,c=e.chartData,o=e.axesLabels,l=e.isStacked,i=void 0!==l&&l,s=e.showsPercentage,d=void 0!==s&&s,m=e.animation,u=void 0===m||m,p=r.a.createRef(),y=d?"%":"",h={type:"bar",data:c,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:u?1e3:0},plugins:{labels:!1},title:{display:!0,text:t},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].label||"";return t&&(t+=": "),t+="".concat(e.yLabel.toLocaleString()).concat(y),t},footer:function(e,a){if(e.length>1){var t=e.map((function(e){return e.yLabel})).reduce((function(e,a){return e+a}));return"Total: ".concat(t.toLocaleString()).concat(y)}}},footerFontStyle:"bold"},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,stacked:i,scaleLabel:{display:!0,labelString:o.x}}],yAxes:[{display:!0,stacked:i,type:"linear",scaleLabel:{display:!0,labelString:o.y},ticks:{beginAtZero:!0,callback:function(e){return"".concat(e.toLocaleString()).concat(y)}}}]}}};return Object(n.useEffect)((function(){var e=p.current.getContext("2d"),a=new v.a(e,h);return function(){return a.destroy()}}),[p,h]),r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"chart barGraph",id:a},r.a.createElement("canvas",{id:"canvas",ref:p})))},Ca=E.lightIndigo,Na=E.darkIndigo,Ta=E.lightGreen,ka=E.darkGreen,wa={sortKey:"totalVaccinationsPerHundred",order:"desc"},xa=function(e){return e.peopleVaccinated||e.peopleFullyVaccinated||!e.totalVaccinations||(e.peopleVaccinated=e.totalVaccinations,e.peopleVaccinatedPerHundred=e.totalVaccinationsPerHundred),e},Da=function(e){var a=e.lastUpdated,t=Object(u.g)(),c=new URLSearchParams(t.search),o=c.get("sort"),l=c.get("order"),i=c.get("rows");o&&l&&i&&(wa={sortKey:o,order:l,rows:parseInt(i)});var m=Object(n.useState)(10),h=Object(y.a)(m,2),v=h[0],b=h[1],g=Object(s.a)(be),E=g.loading,C=g.error,N=g.data;if(E)return r.a.createElement(p,null);if(C)return r.a.createElement(d,{errorData:C});var T=new Map;N.casesByLocationWithNoProvince.forEach((function(e){xa(e);var a=e.continent,t=T.get(a);a&&(t?(t.totalVaccinations+=e.totalVaccinations,t.peopleFullyVaccinated+=e.peopleFullyVaccinated,t.peopleVaccinated+=e.peopleVaccinated,t.population+=e.population,t.percentOfPeopleVaccinated=f(t.peopleVaccinated,t.population,2),t.percentOfPeopleFullyVaccinated=f(t.peopleFullyVaccinated,t.population,2),T.set(a,t)):T.set(a,{totalVaccinations:0,peopleFullyVaccinated:0,peopleVaccinated:0,population:0,percentOfPeopleVaccinated:0,percentOfPeopleFullyVaccinated:0}))}));var k={labels:Array.from(T.keys()),datasets:[{label:"Percent of people partially vaccinated",mainColor:Ca,data:Array.from(T.values()).map((function(e){return e.percentOfPeopleVaccinated}))},{label:"Percent of people fully vaccinated",mainColor:Na,data:Array.from(T.values()).map((function(e){return e.percentOfPeopleFullyVaccinated}))}]},x={labels:Array.from(T.keys()),datasets:[{label:"Number of people partially vaccinated",mainColor:Ta,data:Array.from(T.values()).map((function(e){return e.peopleVaccinated}))},{label:"Number of people fully vaccinated",mainColor:ka,data:Array.from(T.values()).map((function(e){return e.peopleFullyVaccinated}))}]},D=N.casesByLocationWithNoProvince.filter((function(e){return e.totalVaccinations&&e.totalVaccinations>0})).map((function(e){return xa(e)})),S=D.length,L=D.sort((function(e,a){return a.totalVaccinations-e.totalVaccinations})).slice(0,v),O=L.map((function(e){return e.country})),j=L.map((function(e){return{x:e.country,y:e.peopleVaccinated}})),V=L.map((function(e){return{x:e.country,y:e.peopleFullyVaccinated}})),F={labels:O,datasets:[{label:"People partially vaccinated",stack:"Stack 0",backgroundColor:Ta,borderColor:Ta,data:j,fill:!1},{label:"People fully vaccinated",stack:"Stack 0",backgroundColor:ka,borderColor:ka,data:V,fill:!1}]},B=D.sort((function(e,a){return a.totalVaccinationsPerHundred-e.totalVaccinationsPerHundred})).slice(0,v),P=B.map((function(e){return e.country})),A=B.map((function(e){return{x:e.country,y:e.peopleVaccinatedPerHundred}})),M=B.map((function(e){return{x:e.country,y:e.peopleFullyVaccinatedPerHundred}})),U={labels:P,datasets:[{label:"Percent of people partially vaccinated",backgroundColor:Ca,borderColor:Ca,data:A,fill:!1},{label:"Percent of fully vaccinated",backgroundColor:Na,borderColor:Na,data:M,fill:!1}]};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"global-page",className:""},r.a.createElement("h3",null,"Vaccinations")),r.a.createElement("div",{className:"row"},r.a.createElement(w,{lastUpdated:a})),r.a.createElement("div",{className:"row mb-1"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(K,{title:"Total global vaccinations",total:N.totalCases.totalVaccinations,percentage:N.totalCases.totalVaccinationsPerHundred})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(K,{title:"Global partial vaccinations",total:N.totalCases.peopleVaccinated,percentage:N.totalCases.peopleVaccinatedPerHundred})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(K,{title:"Global fully vaccinated",total:N.totalCases.peopleFullyVaccinated,percentage:N.totalCases.peopleFullyVaccinatedPerHundred}))),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(ga,{id:"vaccinationsContinentPercent",chartTitle:"Percent of population partially and fully vaccinated by continent",chartData:k,showsPercentage:!0})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(ga,{id:"vaccinationsContinentTotal",chartTitle:"Total partially and fully vaccinated by continent",chartData:x,showsPercentage:!1}))),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(Ea,{id:"sortedAndTrimmedVaccinationData",chartTitle:"Top ".concat(v," countries showing percent of population partially and fully vaccinated"),axesLabels:{x:"Country",y:"Percentage of population"},chartData:U,isStacked:!0,showsPercentage:!0,animation:!1}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(Ea,{id:"sortedAndTrimmedVaccinationData",axesLabels:{x:"Country",y:"Number of vaccinations"},chartTitle:"Top ".concat(v," countries showing number of partial and full vaccinations by country"),chartData:F,isStacked:!0,animation:!1}))),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("p",{className:"pr-2"},"Number of countries to show in bar charts:"),r.a.createElement("div",{className:"vaccinationChartSliderControls btn-group btn-group-toggle mr-1","data-tip":"Showing ".concat(v," countries in bar charts")},r.a.createElement("input",{type:"range",className:"custom-range",min:"5",max:S,id:"vaccinationCountryChartSlider",value:v,onChange:function(e){var a=parseInt(e.target.value);b(a)}}))),r.a.createElement("div",{className:"row"},r.a.createElement(la,{sortConfig:wa,tableData:D,columnSchema:[{key:"country",name:"Country",type:"link"},{key:"totalVaccinations",name:"Total vaccinated",type:"number"},{key:"peopleVaccinated",name:"Partially vaccinated",type:"number"},{key:"peopleFullyVaccinated",name:"Fully vaccinated",type:"number"},{key:"totalVaccinationsPerHundred",name:"% population vaccinated",type:"percentage"},{key:"peopleVaccinatedPerHundred",name:"% population partially vaccinated",type:"percentage"},{key:"peopleFullyVaccinatedPerHundred",name:"% population fully vaccinated",type:"percentage"}],initialRowsLimit:10})))},Sa=function(e){var a=e.casesByLocation,t=e.lastUpdated;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{basename:"."},r.a.createElement(ea,{searchData:a}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(aa,{casesByLocation:a}),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},r.a.createElement("div",{className:"container-xl"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(ke,{title:"Global",lastUpdated:t})),r.a.createElement(u.a,{path:"/top-cases",children:r.a.createElement(Ae,{lastUpdated:t})}),r.a.createElement(u.a,{path:"/compare",children:r.a.createElement(fa,{lastUpdated:t,countries:a})}),r.a.createElement(u.a,{path:"/today",children:r.a.createElement(Re,{title:"Today's cases",lastUpdated:t})}),r.a.createElement(u.a,{path:"/heatmaps",children:r.a.createElement(_e,{title:"Heatmaps",lastUpdated:t})}),r.a.createElement(u.a,{path:"/table",children:r.a.createElement(sa,{title:"Data Table",lastUpdated:t})}),r.a.createElement(u.a,{path:"/vaccinations",children:r.a.createElement(Da,{title:"Vaccinations",lastUpdated:t})}),r.a.createElement(u.a,{path:"/:id",children:r.a.createElement(Se,{lastUpdated:t})}),r.a.createElement(u.a,{path:"*"},r.a.createElement(we,null))))))),r.a.createElement(Xe,null)))},La=function(){var e,a=Object(s.a)(se),t=a.loading,n=a.error,c=a.data;if(t)e=r.a.createElement(Sa,{casesByLocation:[],lastUpdated:""});else if(n)e=r.a.createElement(d,{errorData:n});else{var o=c.lastUpdated,l=c.casesByLocation;e=r.a.createElement(Sa,{casesByLocation:l,lastUpdated:o})}return e};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oa=new l.a({uri:"".concat("https://covid19-dash-api.herokuapp.com","/graphql")});o.a.render(r.a.createElement(i.a,{client:Oa},r.a.createElement(La,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,a){e.exports={shortenString:function(e,a,t){return null==a&&(a=100),null==t&&(t="..."),e.length>a?e.substring(0,a-t.length)+t:e}}},76:function(e,a,t){e.exports=t(112)},82:function(e,a,t){},83:function(e,a,t){},87:function(e,a,t){}},[[76,1,2]]]);